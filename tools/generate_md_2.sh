#!/bin/bash

# ì¸ìžë¡œ ë°›ì€ cpp íŒŒì¼ ê²½ë¡œ
FILEPATH=$1

# íŒŒì¼ëª… ì¶”ì¶œ (í™•ìž¥ìž ì œê±°)
FILENAME=$(basename "$FILEPATH" .cpp)
DIR=$(dirname "$FILEPATH")
MD_FILE="${DIR}/${FILENAME}.md"
CPP_FILE="${DIR}/${FILENAME}.cpp"

# ì¡´ìž¬ í™•ì¸
if [ ! -f "$CPP_FILE" ]; then
  echo "[âŒ] ${CPP_FILE} íŒŒì¼ì´ ì¡´ìž¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."
  exit 1
fi

# ì´ë¯¸ ë§ˆí¬ë‹¤ìš´ ì¡´ìž¬í•  ê²½ìš°
if [ -f "$MD_FILE" ]; then
  echo "[âš ï¸] ì´ë¯¸ ë§ˆí¬ë‹¤ìš´ íŒŒì¼ì´ ì¡´ìž¬í•©ë‹ˆë‹¤: ${MD_FILE}"
  echo "ðŸ‘‰ ë®ì–´ì“°ì§€ ì•Šê³  ì¢…ë£Œí•©ë‹ˆë‹¤."
  exit 0
fi

# ë§ˆí¬ë‹¤ìš´ ìƒì„±
cat > "$MD_FILE" <<EOF
# ${FILENAME}ë²ˆ: 

## ë¬¸ì œ ìš”ì•½
### ë¬¸ì œ


### ì‚¬ìš© ì•Œê³ ë¦¬ì¦˜


### ìž…ì¶œë ¥
- ìž…ë ¥: 
- ì¶œë ¥: 
\`\`\`
ì˜ˆì œ1

ìž…ë ¥

ì¶œë ¥

\`\`\`
## í’€ì´


## ì–´ë ¤ì› ë˜ ì 


## ë°°ìš´ ì  / ëŠë‚€ ì 


## ì „ì²´ ì½”ë“œ
\`\`\`cpp
$(cat "$CPP_FILE")
\`\`\`
EOF

echo "[âœ”] ë§ˆí¬ë‹¤ìš´ ìƒì„± ì™„ë£Œ: ${MD_FILE}"
code "$MD_FILE"
